<!DOCTYPE html>
<html lang="ru" class="light-theme">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Мой профиль | Портфолио</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #2D3748;
            --accent: #4299E1;
            --light: #F7FAFC;
            --dark: #1A202C;
            --success: #48BB78;
            --warning: #ED8936;
        }

        body {
            background: var(--light);
            color: var(--dark);
            min-height: 100vh;
            padding: 20px;
            transition: all 0.3s;
        }

        body.dark-theme {
            background: var(--dark);
            color: var(--light);
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        /* Шапка профиля */
        .profile-header {
            background: linear-gradient(135deg, #4299E1 0%, #38B2AC 100%);
            color: white;
            padding: 50px;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 30px;
            position: relative;
            box-shadow: 0 10px 30px rgba(66, 153, 225, 0.3);
        }

        .avatar {
            width: 150px;
            height: 150px;
            background: white;
            border-radius: 50%;
            margin: 0 auto 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            color: var(--accent);
            border: 5px solid white;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .profile-header h1 {
            font-size: 36px;
            margin-bottom: 10px;
        }

        .profile-header p {
            font-size: 18px;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 32px;
            font-weight: bold;
            display: block;
        }

        .stat-label {
            font-size: 14px;
            opacity: 0.8;
        }

        /* Контент профиля */
        .profile-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        @media (max-width: 768px) {
            .profile-content {
                grid-template-columns: 1fr;
            }
        }

        .profile-card {
            background: var(--light);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .dark-theme .profile-card {
            background: var(--primary);
        }

        .profile-card:hover {
            transform: translateY(-5px);
        }

        .profile-card h2 {
            font-size: 24px;
            margin-bottom: 25px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--accent);
        }

        .dark-theme .profile-card h2 {
            color: var(--light);
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            padding: 15px 0;
            border-bottom: 1px solid #E2E8F0;
        }

        .dark-theme .info-item {
            border-bottom-color: #4A5568;
        }

        .info-item:last-child {
            border-bottom: none;
        }

        .info-label {
            font-weight: 600;
            color: var(--secondary);
        }

        .info-value {
            font-weight: 500;
        }

        /* Навыки */
        .skills {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
        }

        .skill-tag {
            background: var(--accent);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Кнопки */
        .profile-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            text-decoration: none;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
        }

        .btn-primary:hover {
            background: #3182ce;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #718096;
            color: white;
        }

        .btn-secondary:hover {
            background: #4A5568;
            transform: translateY(-2px);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            background: #38A169;
            transform: translateY(-2px);
        }

        /* Управление темой */
        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid white;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            backdrop-filter: blur(5px);
        }

        .theme-toggle:hover {
            background: white;
            color: var(--accent);
        }

        .back-link {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(0,0,0,0.2);
            padding: 10px 20px;
            border-radius: 10px;
            transition: background 0.3s;
        }

        .back-link:hover {
            background: rgba(0,0,0,0.3);
        }

        /* Активность */
        .activity-list {
            list-style: none;
        }

        .activity-item {
            padding: 15px 0;
            border-bottom: 1px solid #E2E8F0;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .dark-theme .activity-item {
            border-bottom-color: #4A5568;
        }

        .activity-icon {
            width: 40px;
            height: 40px;
            background: rgba(66, 153, 225, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent);
        }

        /* Сообщение если не авторизован */
        .auth-message {
            text-align: center;
            padding: 60px 20px;
            background: var(--light);
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-top: 40px;
        }

        .dark-theme .auth-message {
            background: var(--primary);
        }

        .auth-message i {
            font-size: 64px;
            color: var(--accent);
            margin-bottom: 20px;
        }

        .auth-message h2 {
            margin-bottom: 20px;
            color: var(--primary);
        }

        .dark-theme .auth-message h2 {
            color: var(--light);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="profile-header">
            <a href="../index.html" class="back-link">
                <i class="fas fa-arrow-left"></i> На главную
            </a>
            
            <button class="theme-toggle" id="themeToggle">
                <i class="fas fa-moon"></i> Тема
            </button>

            <div class="avatar">
                <i class="fas fa-user-tie"></i>
            </div>
            
            <h1 id="profileName">Загрузка профиля...</h1>
            <p id="profileTitle">Веб-разработчик</p>
            
            <div class="stats">
                <div class="stat-item">
                    <span class="stat-number" id="projectsCount">0</span>
                    <span class="stat-label">Проектов</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="experienceYears">3</span>
                    <span class="stat-label">Лет опыта</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="cartItems">0</span>
                    <span class="stat-label">В корзине</span>
                </div>
            </div>
        </div>

        <div id="profileContent">
            <!-- Контент загружается через JavaScript -->
        </div>

        <div class="profile-actions">
            <a href="bucket.html" class="btn btn-primary">
                <i class="fas fa-shopping-cart"></i> Моя корзина
            </a>
            <button class="btn btn-success" onclick="editProfile()">
                <i class="fas fa-edit"></i> Редактировать профиль
            </button>
            <button class="btn btn-secondary" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i> Выйти из системы
            </button>
        </div>
    </div>

    <script src="../js/theme.js"></script>
    <script>
        // Данные профиля по умолчанию
        const defaultProfile = {
            firstName: 'Иван',
            lastName: 'Иванов',
            email: 'ivan@example.com',
            username: 'ivan_webdev',
            title: 'Веб-разработчик',
            bio: 'Специалист по созданию современных веб-приложений с фокусом на пользовательском опыте и производительности.',
            location: 'Москва, Россия',
            phone: '+7 (999) 123-45-67',
            skills: ['HTML/CSS', 'JavaScript', 'React', 'Node.js', 'Git', 'Figma'],
            experience: 3,
            projects: 12,
            joined: '2022-01-15'
        };

        // Загрузка профиля
        function loadProfile() {
            const userData = localStorage.getItem('current_user');
            
            if (!userData) {
                showAuthMessage();
                return;
            }
            
            const user = JSON.parse(userData);
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            
            // Обновляем заголовок
            document.getElementById('profileName').textContent = 
                `${user.firstName || defaultProfile.firstName} ${user.lastName || defaultProfile.lastName}`;
            document.getElementById('profileTitle').textContent = 
                user.title || defaultProfile.title;
            
            // Обновляем статистику
            document.getElementById('projectsCount').textContent = defaultProfile.projects;
            document.getElementById('experienceYears').textContent = defaultProfile.experience;
            document.getElementById('cartItems').textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
            
            // Загружаем контент профиля
            renderProfileContent(user);
        }

        // Рендеринг контента профиля
        function renderProfileContent(user) {
            const container = document.getElementById('profileContent');
            
            const content = `
                <div class="profile-content">
                    <!-- Личная информация -->
                    <div class="profile-card">
                        <h2><i class="fas fa-user-circle"></i> Личная информация</h2>
                        <div class="info-item">
                            <span class="info-label">Полное имя:</span>
                            <span class="info-value">${user.firstName || defaultProfile.firstName} ${user.lastName || defaultProfile.lastName}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Email:</span>
                            <span class="info-value">${user.email || defaultProfile.email}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Имя пользователя:</span>
                            <span class="info-value">${user.username || defaultProfile.username}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Телефон:</span>
                            <span class="info-value">${defaultProfile.phone}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Местоположение:</span>
                            <span class="info-value">${defaultProfile.location}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Дата регистрации:</span>
                            <span class="info-value">${new Date(user.createdAt || defaultProfile.joined).toLocaleDateString()}</span>
                        </div>
                    </div>

                    <!-- Навыки и опыт -->
                    <div class="profile-card">
                        <h2><i class="fas fa-cogs"></i> Навыки и опыт</h2>
                        <p style="margin-bottom: 20px; line-height: 1.6;">${user.bio || defaultProfile.bio}</p>
                        
                        <h3 style="margin: 25px 0 15px; font-size: 18px;"><i class="fas fa-star"></i> Профессиональные навыки</h3>
                        <div class="skills">
                            ${defaultProfile.skills.map(skill => `
                                <div class="skill-tag">
                                    <i class="fas fa-check"></i> ${skill}
                                </div>
                            `).join('')}
                        </div>
                        
                        <h3 style="margin: 25px 0 15px; font-size: 18px;"><i class="fas fa-history"></i> Недавняя активность</h3>
                        <ul class="activity-list">
                            <li class="activity-item">
                                <div class="activity-icon">
                                    <i class="fas fa-sign-in-alt"></i>
                                </div>
                                <div>
                                    <strong>Вход в систему</strong>
                                    <p style="font-size: 14px; color: var(--secondary); margin-top: 5px;">
                                        ${new Date().toLocaleString()}
                                    </p>
                                </div>
                            </li>
                            <li class="activity-item">
                                <div class="activity-icon">
                                    <i class="fas fa-shopping-cart"></i>
                                </div>
                                <div>
                                    <strong>Добавлен товар в корзину</strong>
                                    <p style="font-size: 14px; color: var(--secondary); margin-top: 5px;">
                                        Вчера в 14:30
                                    </p>
                                </div>
                            </li>
                            <li class="activity-item">
                                <div class="activity-icon">
                                    <i class="fas fa-code"></i>
                                </div>
                                <div>
                                    <strong>Завершен проект "Портфолио"</strong>
                                    <p style="font-size: 14px; color: var(--secondary); margin-top: 5px;">
                                        2 дня назад
                                    </p>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            `;
            
            container.innerHTML = content;
        }

        // Сообщение если не авторизован
        function showAuthMessage() {
            const container = document.getElementById('profileContent');
            container.innerHTML = `
                <div class="auth-message">
                    <i class="fas fa-user-lock"></i>
                    <h2>Вы не авторизованы</h2>
                    <p style="margin-bottom: 30px; max-width: 500px; margin-left: auto; margin-right: auto;">
                        Для просмотра профиля необходимо войти в систему или зарегистрироваться.
                    </p>
                    <div style="display: flex; gap: 15px; justify-content: center;">
                        <a href="login.html" class="btn btn-primary">
                            <i class="fas fa-sign-in-alt"></i> Войти
                        </a>
                        <a href="register.html" class="btn btn-success">
                            <i class="fas fa-user-plus"></i> Зарегистрироваться
                        </a>
                    </div>
                </div>
            `;
            
            document.querySelector('.profile-actions').style.display = 'none';
        }

        // Редактирование профиля
        function editProfile() {
            const user = JSON.parse(localStorage.getItem('current_user')) || defaultProfile;
            
            const newFirstName = prompt('Введите ваше имя:', user.firstName || defaultProfile.firstName);
            const newLastName = prompt('Введите вашу фамилию:', user.lastName || defaultProfile.lastName);
            const newEmail = prompt('Введите ваш email:', user.email || defaultProfile.email);
            const newTitle = prompt('Введите вашу должность:', user.title || defaultProfile.title);
            
            if (newFirstName !== null) user.firstName = newFirstName;
            if (newLastName !== null) user.lastName = newLastName;
            if (newEmail !== null) user.email = newEmail;
            if (newTitle !== null) user.title = newTitle;
            
            localStorage.setItem('current_user', JSON.stringify(user));
            loadProfile();
            alert('Профиль успешно обновлен!');
        }

        // Выход из системы
        function logout() {
            if (confirm('Вы уверены, что хотите выйти из системы?')) {
                localStorage.removeItem('current_user');
                alert('Вы успешно вышли из системы');
                window.location.href = 'login.html';
            }
        }

        // Инициализация
        window.onload = function() {
            loadProfile();
        };
    </script>
</body>
</html>